<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>注册</title>
    <!--用百度的静态资源库的cdn安装bootstrap环境-->
    <!-- Bootstrap 核心 CSS 文件 -->
    <link href="http://apps.bdimg.com/libs/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet">
    <!--font-awesome 核心我CSS 文件-->
    <link href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- 在bootstrap.min.js 之前引入 -->
    <script src="http://apps.bdimg.com/libs/jquery/2.0.0/jquery.min.js"></script>
    <!-- Bootstrap 核心 JavaScript 文件 -->
    <script src="http://apps.bdimg.com/libs/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <!--jquery.validate-->
    <script type="text/javascript" src="js/jquery.validate.min.js" ></script>
    <script type="text/javascript" src="js/message.js" ></script>
    <style type="text/css">
        body{background: url(img/bg-courd.jpg) no-repeat;background-size:cover;font-size: 16px;}
        .form{background: rgba(255,255,255,0.2);width:400px;margin:100px auto;}
        #login_form{display: block;}
        #register_form{}
        .fa{display: inline-block;top: 27px;left: 6px;position: relative;color: #ccc;}
        input[type="text"],input[type="password"]{padding-left:26px;}
        .checkbox{padding-left:21px;}
    </style>
    <script>
        function checkEmail() {
            var email=document.getElementById("myemail").value;
            if (email==""||email==null){
                alert("邮箱不能为空！");
                return false;
            }
            $.ajax({
                url : "user/checkEmail.do",
                type : 'post',
                dataType:'text',
                data:"email="+email,
                success : function(msg) {
                    document.getElementById("msg").innerText = msg;
                }
            });


        }
        function onClickBySub() {
            var msg=document.getElementById("msg").innerText;
           /* alert(msg);*/
            if(msg=="该邮箱已被注册！"){
                return false;
            }else {
                return true;
            }
        }

    </script>

</head>
<body>
<div class="container">

<div class="form row">
    <form class="form-horizontal col-sm-offset-3 col-md-offset-3" id="register_form" action="user/register.do" method="post" onsubmit="return onClickBySub()">
        <h3 class="form-title">注册</h3>
        <div class="col-sm-9 col-md-9">
            <div class="form-group">
                <i class="fa fa-user fa-lg"></i>
                <input class="form-control required" type="text" placeholder="Username" name="userName" autofocus="autofocus"/>
            </div>
            <div class="form-group">
                <i class="fa fa-user fa-lg"></i>
                <input class="form-control required" type="text" placeholder="Age" name="age" autofocus="autofocus"/>
            </div>
            <div class="form-group">
                <i class="fa fa-lock fa-lg"></i>
                <input class="form-control required" type="password" placeholder="Password" id="register_password" name="password"/>
            </div>
            <div class="form-group">
                <i class="fa fa-check fa-lg"></i>
                <input class="form-control required" type="password" placeholder="Re-type Your Password" name="rpassword"/>
            </div>
            <div class="form-group">
                <i class="fa fa-envelope fa-lg"></i>
                <input class="form-control eamil" id="myemail" type="text" placeholder="Email" name="email"  onblur="checkEmail()"/>
                <i id="msg"></i>
            </div>
            <div class="form-group">
                <input type="submit" class="btn btn-success pull-right" value="注册 "/>
                <input type="submit" class="btn btn-info pull-left" id="back_btn" value="Back"/>
            </div>
        </div>
    </form>
</div>
</div>
<script type="text/javascript" src="js/main.js" ></script>
</body>
</html>